# Incident Report: INC-002

## Title: Neo4j Schema Migration Failure

**Status:** Resolved  
**Severity:** P2 (High)  
**Date:** 2026-01-22  
**Duration:** 23 minutes

## Summary

Deployment of Neo4j schema changes failed due to attempting to create constraints that already existed.

## Timeline

| Time | Event |
|------|-------|
| 09:00 | Deployment started |
| 09:02 | Migration script executed |
| 09:03 | Error: Constraint already exists |
| 09:05 | Deployment rolled back |
| 09:15 | Idempotent migration script prepared |
| 09:23 | Successful deployment |

## Impact

- **Failed Deployments:** 1
- **Affected Services:** Neo4j Database (brief downtime during rollback)
- **User Impact:** GraphRAG queries degraded to vector-only for 23 minutes

## Root Cause

The migration script was not idempotent. Running it against a database that already had constraints caused a failure.

## Resolution

See CHG-002 for permanent fix (idempotent migrations).

## Error Message

```
Neo.ClientError.Schema.ConstraintAlreadyExists:
Constraint already exists: CONSTRAINT ON (e:Entity) ASSERT e.id IS UNIQUE
```
